import{a as W}from"./chunk-EKW523KR.js";import{a as N,b as j,d as G,f as K,g as L,n as Q,o as U,p as q,r as $,s as z,u as J}from"./chunk-EFI6HIJC.js";import{f as p}from"./chunk-MZXTZES5.js";import{j as T}from"./chunk-VAHVCNLV.js";import{o as S}from"./chunk-LU62OM3R.js";import{Cb as O,Ma as v,Nb as D,Ob as m,Qb as k,Ra as b,Tc as h,Ub as M,Uc as V,Vb as E,Wb as w,Xb as d,Yb as f,Zb as B,dc as l,ec as F,ga as g,ia as y,ic as H,jc as x,kc as A,mb as c,na as a,ta as _,tb as I,ua as P,va as C,vc as R}from"./chunk-KVLKPACU.js";var u=(()=>{class n{constructor(){this._elementRef=a(b),this._renderer=a(I),this.valuePaste=new v}get api(){return{focus:()=>{this._elementRef.nativeElement.focus()},nativeElement:this._elementRef.nativeElement}}ngOnInit(){this._placeholder=this._elementRef.nativeElement.getAttribute("placeholder")||""}_handleFocus(){this._renderer.removeAttribute(this._elementRef.nativeElement,"placeholder")}_handleBlur(){this._renderer.setAttribute(this._elementRef.nativeElement,"placeholder",this._placeholder)}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275dir=C({type:n,selectors:[["","emrPinInput",""]],hostBindings:function(e,i){e&1&&l("focus",function(r){return i._handleFocus(r)})("blur",function(r){return i._handleBlur(r)})},inputs:{index:"index",acceptOnly:"acceptOnly"},outputs:{valuePaste:"valuePaste"}})}}return n})();function tt(n,Y){if(n&1&&(d(0,"div",2)(1,"mat-form-field"),B(2,"input",3),f()()),n&2){let t=Y.$implicit,e=F();c(2),m("formControl",t)("acceptOnly",e.acceptOnly)("placeholder",e.placeholder),D("disabled",e.disabled||null)}}var yt=(()=>{class n{constructor(){this._fb=a(z),this.length=4,this.placeholder="",this.acceptOnly=/^[0-9]+$/,this.disabled=!1,this.invalid=!1,this.onChange=()=>{},this.onTouched=()=>{}}get controls(){return this.form.get("value").controls}ngOnInit(){let t=[];for(let e=0;e<this.length;e++)t.push(this._fb.control({value:"",disabled:this.disabled},[G.required]));this.form=this._fb.group({value:this._fb.array(t)})}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=T(t)}writeValue(t){if(!t){this.controls.forEach(e=>{e.setValue("")});return}t=String(t);for(let e=0;e<t.length;e++){let i=this.controls[e];i&&t[e].match(this.acceptOnly)&&i.setValue(t[e])}}_valuePaste(t){t.preventDefault(),t.stopPropagation()}_handleKeyDown(t){if(t.key==="Delete"||t.key==="Backspace"||t.key==="Tab"){let e=t.target;t.key==="Backspace"&&!e.value&&this.inputs.forEach((i,o)=>{let r=t.target;if(i.api.nativeElement===r){let s=this.inputs.get(o-1);s&&s.api.focus()}});return}t.preventDefault(),t.stopPropagation()}_handleKeyUp(t){if(t.key==="Shift"||t.keyCode>=112&&t.keyCode<=123){t.preventDefault(),t.stopPropagation();return}if(t.key==="Delete"||t.key==="Backspace"||t.key==="Tab"){this.onChange(this.form.value.value.join(""));return}if(!t.key.match(this.acceptOnly)){t.preventDefault(),t.stopPropagation();return}this.inputs.forEach((e,i)=>{let o=t.target;if(e.api.nativeElement===o){this.controls[i].setValue(t.key);let s=this.inputs.get(i+1);s&&s.api.focus()}}),this.onChange(this.form.value.value.join(""))}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=_({type:n,selectors:[["emr-pin-input"]],viewQuery:function(e,i){if(e&1&&H(u,5),e&2){let o;x(o=A())&&(i.inputs=o)}},hostAttrs:[1,"emr-pin-input"],hostVars:2,hostBindings:function(e,i){e&1&&l("paste",function(r){return i._valuePaste(r)})("keydown",function(r){return i._handleKeyDown(r)})("keyup",function(r){return i._handleKeyUp(r)}),e&2&&k("is-disabled",i.disabled)},inputs:{length:[2,"length","length",V],placeholder:"placeholder",acceptOnly:"acceptOnly",disabled:[2,"disabled","disabled",h],invalid:[2,"invalid","invalid",h]},exportAs:["emrPinInput"],features:[R([{provide:N,useExisting:g(()=>n),multi:!0}]),O],decls:4,vars:1,consts:[[3,"formGroup"],["formArrayName","value",1,"inputs"],[1,"input"],["type","text","matInput","","emrPinInput","","maxlength","1",3,"formControl","acceptOnly","placeholder"]],template:function(e,i){e&1&&(d(0,"div",0)(1,"div",1),E(2,tt,3,4,"div",2,M),f()()),e&2&&(m("formGroup",i.form),c(2),w(i.controls))},dependencies:[j,K,L,$,Q,U,q,p,W,u],styles:["[_nghost-%COMP%]{display:block;width:max-content}[_nghost-%COMP%]   .inputs[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--emr-pin-gap)}[_nghost-%COMP%]   .input[_ngcontent-%COMP%]{flex:none}[_nghost-%COMP%]     .mat-mdc-form-field{width:var(--emr-pin-input-width)!important}[_nghost-%COMP%]     .mdc-text-field{padding:0}[_nghost-%COMP%]     .mat-mdc-input-element{text-align:center}[_nghost-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}"]})}}return n})();var bt=(()=>{class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275mod=P({type:n})}static{this.\u0275inj=y({imports:[S,J,p]})}}return n})();export{yt as a,bt as b};
