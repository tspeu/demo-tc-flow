import{Ca as C,Da as x,Ea as b,Fa as w,Hb as y,Ob as A,Qa as a,Qb as m,Ra as P,Sb as d,Tc as R,Xb as p,Yb as g,Zb as M,bc as I,dc as z,ec as c,fc as S,ga as h,gc as k,jb as O,ka as v,mb as l,na as f,pc as V,qc as T,ta as _,vc as L,wc as E}from"./chunk-KVLKPACU.js";var j=new v("Avatar");var $=[[["mat-icon"]]],B=["mat-icon"];function D(n,u){if(n&1){let e=I();p(0,"img",3),z("load",function(){x(e);let i=c();return b(i.onImageLoaded())}),g()}if(n&2){let e=c();A("src",e.src(),O)("alt",e.alt()||"")}}function H(n,u){if(n&1&&M(0,"div",4),n&2){let e=c();m("is-online",e.presenceIndicator()==="online")("is-offline",e.presenceIndicator()==="offline")}}function U(n,u){if(n&1&&(w(),p(0,"svg",2)(1,"text",5),V(2),g()()),n&2){let e=c();l(2),T(e.text())}}var F=[],W=(()=>{class n{constructor(){this._elementRef=f(P),this.src=a(),this.clickable=a(!1,{transform:R}),this.text=a(),this.alt=a(),this.automaticColor=a(),this.presenceIndicator=a(null)}ngOnInit(){this.src()&&(this.imageLoaded=F.includes(this.src()))}ngOnChanges(e){e.automaticColor&&e.automaticColor.currentValue&&this._setAutomaticColor(e.automaticColor.currentValue)}onImageLoaded(){this.imageLoaded||(F.push(this.src()),this.imageLoaded=!0)}_setAutomaticColor(e){if(!this.isValidHex(e))throw new Error(`Invalid ${e} color, automatic color supports only a valid hex color`);let t=this._elementRef.nativeElement;t.style.setProperty("--emr-avatar-bg",e),t.style.setProperty("--emr-avatar-border-color",this._newShade(e,-25)),t.style.setProperty("--emr-avatar-color",this._newShade(e,-150))}_newShade(e,t){if(e=e.replace("#",""),e.length===6){let i=parseInt(e,16),r=(i>>16)+t;r>255&&(r=255),r<0&&(r=0);let o=(i&255)+t;o>255&&(o=255),o<0&&(o=0);let s=(i>>8&255)+t;return s>255&&(s=255),s<0&&(s=0),`#${(o|s<<8|r<<16).toString(16)}`}else return e}isValidHex(e){if(!e||typeof e!="string")return!1;switch(e.substring(0,1)==="#"&&(e=e.substring(1)),e.length){case 3:return/^[0-9A-F]{3}$/i.test(e);case 6:return/^[0-9A-F]{6}$/i.test(e);case 8:return/^[0-9A-F]{8}$/i.test(e);default:return!1}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=_({type:n,selectors:[["emr-avatar"],["","emr-avatar",""]],hostAttrs:[1,"emr-avatar"],hostVars:6,hostBindings:function(t,i){t&2&&m("is-clickable",i.clickable())("has-automatic-color",!!i.automaticColor())("has-loaded-image",i.src()&&i.imageLoaded)},inputs:{src:[1,"src"],clickable:[1,"clickable"],text:[1,"text"],alt:[1,"alt"],automaticColor:[1,"automaticColor"],presenceIndicator:[1,"presenceIndicator"]},exportAs:["emrAvatar"],standalone:!0,features:[L([{provide:j,useExisting:h(()=>n),multi:!0}]),C,E],ngContentSelectors:B,decls:4,vars:3,consts:[["loading","lazy",1,"image",3,"src","alt"],[1,"presence-indicator",3,"is-online","is-offline"],["width","100%","viewBox","0 0 250 250","height","100%","xmlns","http://www.w3.org/2000/svg",1,"relative","z-[0]","text"],["loading","lazy",1,"image",3,"load","src","alt"],[1,"presence-indicator"],["x","50%","y","50%","alignment-baseline","central","text-anchor","middle","font-weight","inherit","font-size","90","fill","currentColor"]],template:function(t,i){t&1&&(S($),y(0,D,1,2,"img",0)(1,H,1,4,"div",1)(2,U,3,1,":svg:svg",2),k(3)),t&2&&(d(i.src()?0:-1),l(),d(i.presenceIndicator()?1:-1),l(),d(i.text()?2:-1))},styles:["[_nghost-%COMP%]{display:inline-flex;align-items:center;justify-content:center;-webkit-user-select:none;user-select:none;flex:none;text-transform:uppercase;font-weight:var(--emr-avatar-font-weight);position:relative;box-shadow:var(--emr-avatar-inner-border)}[_nghost-%COMP%]:not([class*=text-]){color:var(--emr-avatar-color)}[_nghost-%COMP%]:not([class*=rounded]){border-radius:var(--emr-avatar-border-radius)}[_nghost-%COMP%]:not([class*=w-]):not([class*=size-]){width:var(--emr-avatar-size)}[_nghost-%COMP%]:not([class*=h-]):not([class*=size-]){height:var(--emr-avatar-size)}[_nghost-%COMP%]:not([class*=bg-]):not(.has-loaded-image){background:var(--emr-avatar-bg)}.has-loaded-image[_nghost-%COMP%]   .text[_ngcontent-%COMP%]{display:none}.is-clickable[_nghost-%COMP%]{cursor:pointer}.is-hidden[_nghost-%COMP%]{display:none}.is-clickable[_nghost-%COMP%]:active{scale:.97}[_nghost-%COMP%]   .image[_ngcontent-%COMP%]{display:inline;object-fit:cover;position:absolute;width:100%;height:100%;border-radius:inherit;z-index:1}[_nghost-%COMP%]   .presence-indicator[_ngcontent-%COMP%]{position:absolute;z-index:1;outline:var(--emr-avatar-presence-indicator-outline);border-radius:6.1875rem;width:var(--emr-avatar-presence-indicator-size);height:var(--emr-avatar-presence-indicator-size);top:var(--emr-avatar-presence-indicator-position-top);inset-inline-end:var(--emr-avatar-presence-indicator-position-end)}[_nghost-%COMP%]   .presence-indicator.is-online[_ngcontent-%COMP%]{background:var(--emr-avatar-presence-indicator-online-bg)}[_nghost-%COMP%]   .presence-indicator.is-offline[_ngcontent-%COMP%]{background:var(--emr-avatar-presence-indicator-offline-bg)}[_nghost-%COMP%]     .mat-icon{display:flex;align-items:center;justify-content:center}.has-automatic-color[_nghost-%COMP%]{border:1px solid var(--emr-avatar-border-color)}"]})}}return n})();export{j as a,W as b};
